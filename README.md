The code is refactored to remove code smells